<%- include("partials/_header") %>

  <div class="container mt-4">
    <div class="row">
      <div class="col-md-5">
        <div class="card-body">
          <form action="/addMedia" method="POST">
            <div class="row">
              <div class="col-md-6">

                <input required type="text" name="serial" placeholder="Serial" class="form-control mb-3" required
                  autofocus />
                <input required type="text" name="titulo" placeholder="Titulo" class="form-control mb-3" />
                <input required type="text" name="sinopsis" placeholder="Sinopsis" class="form-control mb-3" />
                <input required type="text" name="urlPelicula" placeholder="Url" class="form-control mb-3" />
                <input required type="text" name="imagenPortada" placeholder="imagen" class="form-control mb-3" />
                <input required type="text" name="a単oEstreno" placeholder="A単o de estreno" class="form-control mb-3" />

              </div>
              <!-- Relacionales SQL -->
              <div class="col-md-6">
                <select name="directorPrincipal">
                  <% for (const director of directores) { %>
                    <option value="<%= director.id %>">
                      <%= director.nombre %>
                    </option>
                    <% } %>
                </select>
                <select name="generoPrincipal">
                  <% for (const genero of generos) { %>
                    <option value="<%= genero.id %>">
                      <%= genero.nombre %>
                    </option>
                    <% } %>
                </select>
                <select name="productora">
                  <% for (const productor of productores) { %>
                    <option value="<%= productor.id %>">
                      <%= productor.nombre %>
                    </option>
                    <% } %>
                </select>
                <select name="tipo">
                  <% for (const tipo of tipos) { %>
                    <option value="<%= tipo.id %>">
                      <%= tipo.nombre %>
                    </option>
                    <% } %>
                </select>

              </div>
            </div>
            <button type="submit" class="btn btn-info">guardar media</button>
          </form>
        </div>
      </div>
      <div class="col-md-12">
        <h1 class="">Gestion de los media</h1>
        <table class="table table-dark table-bordered table-hover">
          <thead>
            <tr>
              <td>Serial</td>
              <td>Titulo</td>
              <td>Sinopsis</td>
              <td>Url de pelicula</td>
              <td>Imagen de la portada</td>
              <td>Fecha de Creacion</td>
              <td>Fecha de Actualizacion</td>
              <td>A単o de estreno</td>
              <td>Genero principal</td>
              <td>Director principal</td>
              <td>productora</td>
              <td>tipo</td>
            </tr>
          </thead>
          <tbody>
            <% if (media) { %>
              <% for(var i=0; i < media.length; i++) { %>
                <tr>
                  <td>
                    <%= media[i].serial %>
                  </td>
                  <td>
                    <%= media[i].titulo %>
                  </td>
                  <td>
                    <%= media[i].sinopsis %>
                  </td>
                  <td>
                    <%= media[i].urlPelicula %>
                  </td>
                  <td>
                    <%= media[i].imagenPortada %>
                  </td>
                  <td>
                    <%= media[i].fechaCreacion %>
                  </td>
                  <td>
                    <%= media[i].fechaActualizacion %>
                  </td>
                  <td>
                    <%= media[i].a単oEstreno %>
                  </td>
                  <td>
                    <%= media[i].NombreGenero %>
                  </td>
                  <td>
                    <%= media[i].NombreDirector %>
                  </td>
                  <td>
                    <%= media[i].NombreProductor %>
                  </td>
                  <td>
                    <%= media[i].NombreTipo %>
                  </td>

                  <td class="d-flex gap-2">
                    <a href="/updateMedia/<%= media[i].id %>" class="btn btn-info">
                      Edit
                    </a>
                    <a href="/deleteMedia/<%= media[i].id %>" class="btn btn-danger">
                      Delete
                    </a>
                  </td>
                </tr>
                <% } %>
                  <% } %>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <%- include("partials/_footer") %>